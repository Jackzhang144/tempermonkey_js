# 自动化大红楼 (AutoHePan)

一个功能强大的油猴脚本，用于在电子科技大学清水河畔论坛（经 WebVPN 访问）上自动发帖（俗称“水帖”）。它智能检测发帖限制，提供友好的用户界面和丰富的配置选项。

## 功能特点

-   **🔄 全自动发帖**: 自动填写内容并提交回复，解放双手。
-   **⚙️ 高度可配置**: 自定义发帖间隔时间、发帖内容列表等。
-   **🧠 智能限制检测**: 自动检测“连续回复9次”等限制，并在触发后等待冷却。
-   **🎨 优雅的用户界面**: 现代化的浮动控制面板，支持拖拽移动和最小化。
-   **📊 实时状态监控**: 显示发帖次数、错误次数和当前运行状态。
-   **💾 配置持久化**: 使用 Tampermonkey 的存储功能保存您的设置。
-   **🛡️ 错误恢复机制**: 连续错误达到阈值后自动停止，保护账号安全。
-   **🌙 深色模式支持**: 自动适应论坛的深色/浅色模式。

## 安装教程

### 前提条件

1.  您需要安装一个用户脚本管理器：
    *   **Chrome**: [Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
    *   **Firefox**: [Tampermonkey](https://addons.mozilla.org/firefox/addon/tampermonkey/) 或 [Greasemonkey](https://addons.mozilla.org/firefox/addon/greasemonkey/)
    *   **Safari**: [Tampermonkey](https://www.tampermonkey.net/?browser=safari)
2.  您需要拥有一个电子科技大学清水河畔论坛的账号，并能通过 WebVPN 登录。

### 安装脚本

1.  **最简单的方法**: 点击此链接安装 -> [安装自动化大红楼](https://github.com/Jackzhang144/tempermonkey_js/raw/main/AutoHePan.user.js)
2.  **手动安装**:
    *   访问您的油猴脚本管理器的“仪表盘”页面。
    *   点击“实用工具”选项卡。
    *   在“从 URL 安装”区域，粘贴以下脚本的 **RAW** 地址（例如：`https://github.com/Jackzhang144/tempermonkey_js/raw/main/AutoHePan.user.js`）。
    *   点击“安装”，确认提示即可。

## 使用方法

1.  正常通过 WebVPN 登录到清水河畔论坛，并打开任意一个帖子页面（URL 类似 `*://webvpn.uestc.edu.cn/https/77726476706e69737468656265737421f2f552d232357b447d468ca88d1b203b/thread/*`）。
2.  页面加载完成后，您会在屏幕左上角看到一个浮动的 **“自动水帖工具”** 控制面板。
3.  **配置选项**:
    *   **最小/最大间隔**: 设置每次发帖之间的随机时间间隔（毫秒）。
    *   **发帖内容**: 输入用于回复的内容列表，用中文逗号 `，` 分隔。脚本会从中随机选择一条发送。
    *   **最大连续错误次数**: 设置连续发帖失败多少次后自动停止，防止因网络问题或未知错误无限尝试。
    *   点击 **“保存配置”** 以应用更改。
4.  **开始使用**:
    *   点击 **“开始自动发帖”** 按钮，脚本即开始工作。
    *   状态栏会显示当前运行状态和计数。
    *   如果触发发帖限制，脚本会自动进入等待状态，并在冷却结束后继续。
    *   点击 **“停止自动发帖”** 或 **“取消等待并停止”** 来终止脚本。

## 配置说明

所有配置都保存在您的浏览器本地。

-   **最小间隔**: 推荐 ≥ 1000 毫秒（1秒）。
-   **最大间隔**: 推荐 ≥ 2000 毫秒（2秒），且必须大于最小间隔。
-   **发帖内容**: 可以自由发挥，例如 `["水水", "顶", "感谢分享"]`。
-   **面板位置**: 可以直接用鼠标拖拽控制面板来改变其位置。

## 注意事项

-   **⚠️ 请负责任地使用**: 滥用自动发帖功能可能导致论坛账号受到处罚（如禁言）。请遵守论坛规则，合理设置发帖频率。
-   **兼容性**: 此脚本目前仅适配了通过 **WebVPN** 访问的河畔论坛界面。如果河畔将来直接开放外网访问，脚本可能需要更新 `@match` 规则和元素选择器。
-   **脚本仅用于学习交流**: 请勿用于恶意刷屏或攻击性行为。

## 更新日志

-   **v2.5.5**
    -   修复了潜在的UI创建错误。
    -   增强了错误处理机制。
    -   优化了拖拽体验。

## 问题反馈

如果您遇到任何问题或有改进建议，欢迎在 GitHub 项目中 [提交 Issue](https://github.com/Jackzhang144/tempermonkey_js/issues)。

请提供以下信息以便快速定位问题：
-   浏览器和油猴脚本管理器版本。
-   错误描述和复现步骤。
-   控制台（Console）的错误截图（如果有）。

## 免责声明

本脚本为开源项目，仅供技术学习和交流之用。使用者应对其行为负责，作者不对因使用此脚本而导致的任何账号问题或后果承担责任。
